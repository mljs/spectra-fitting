<!doctype html>
<html lang="en">
<head>
  <meta charset='utf-8'>
  <title>ml-spectra-fitting 3.0.3 | Documentation</title>
  <meta name='description' content='Fit spectra using gaussian or lorentzian'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' rel='stylesheet'>
  <link href='assets/style.css' rel='stylesheet'>
  <link href='assets/github.css' rel='stylesheet'>
  <link href='assets/split.css' rel='stylesheet'>
</head>
<body class='documentation m0'>
    <div class='flex'>
      <div id='split-left' class='overflow-auto fs0 height-viewport-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>ml-spectra-fitting</h3>
          <div class='mb1'><code>3.0.3</code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            spellcheck='false'
            autocapitalize='off'
            autocorrect='off'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#optimize'
                  class="">
                  optimize
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#sumofgaussianlorentzians'
                  class="">
                  sumOfGaussianLorentzians
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#sumofgaussians'
                  class="">
                  sumOfGaussians
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#sumoflorentzians'
                  class="">
                  sumOfLorentzians
                  
                </a>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='https://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div id='split-right' class='relative overflow-auto height-viewport-100'>
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='optimize'>
      optimize
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/mljs/spectra-fitting/blob/fb8862275e380598c8343df02353610dd4d61051/src/index.js#L44-L104'>
      <span>src/index.js</span>
      </a>
    
  </div>
  

  <p>Fits a set of points to the sum of a set of bell functions.</p>

    <div class='pre p1 fill-light mt0'>optimize(data: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, peakList: any, options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>, peaks: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>data</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>)</code>
	    An object containing the x and y data to be fitted.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>peakList</span> <code class='quiet'>(any)</code>
	    
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>
            = <code>{}</code>)</code>
	    
          </div>
          
          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>
              
                <tr>
  <td class='break-word'><span class='code bold'>options.shape</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
  
    (default <code>{}</code>)
  </td>
  <td class='break-word'><span>it's specify the kind of shape used to fitting.
</span></td>
</tr>

  
    <tr>
  <td class='break-word'><span class='code bold'>options.shape.kind</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>
  
    (default <code>&#39;gaussian&#39;</code>)
  </td>
  <td class='break-word'><span>kind of shape; lorentzian, gaussian and pseudovoigt are supported.
</span></td>
</tr>


  


              
                <tr>
  <td class='break-word'><span class='code bold'>options.optimization</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
  
    (default <code>{}</code>)
  </td>
  <td class='break-word'><span>it's specify the kind and options of the algorithm use to optimize parameters.
</span></td>
</tr>

  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.kind</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
  
    (default <code>&#39;lm&#39;</code>)
  </td>
  <td class='break-word'><span>kind of algorithm. By default it's levenberg-marquardt.
</span></td>
</tr>


  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.parameters</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>?</code>
  </td>
  <td class='break-word'><span>options of each parameter to be optimized e.g. For a gaussian shape
it could have x, y and with properties, each of which could contain init, min, max and gradientDifference, those options will define the guess,
the min and max value of the parameter (search space) and the step size to approximate the jacobian matrix respectively. Those options could be a number,
array of numbers, callback, or array of callbacks. Each kind of shape has default parameters so it could be undefined.
</span></td>
</tr>

  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.parameters.x</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a>?</code>
  </td>
  <td class='break-word'><span>options for x parameter.
</span></td>
</tr>

  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.parameters.x.init</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | callback | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>&#x3C;(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | callback)>)?</code>
  </td>
  <td class='break-word'><span>definition of the starting point of the parameter (the guess),
if it is a callback the method pass the peak as the unique input, if it is an array the first element define the guess of the first peak and so on.
</span></td>
</tr>


  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.parameters.x.min</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | callback | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>&#x3C;(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | callback)>)?</code>
  </td>
  <td class='break-word'><span>definition of the lower limit of the parameter,
if it is a callback the method pass the peak as the unique input, if it is an array the first element define the min of the first peak and so on.
</span></td>
</tr>


  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.parameters.x.max</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | callback | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>&#x3C;(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | callback)>)?</code>
  </td>
  <td class='break-word'><span>definition of the upper limit of the parameter,
if it is a callback the method pass the peak as the unique input, if it is an array the first element define the max of the first peak and so on.
</span></td>
</tr>


  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.parameters.x.gradientDifference</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | callback | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>&#x3C;(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a> | callback)>)?</code>
  </td>
  <td class='break-word'><span>definition of  the step size to approximate the jacobian matrix of the parameter,
if it is a callback the method pass the peak as the unique input, if it is an array the first element define the gradientDifference of the first peak and so on.
</span></td>
</tr>


  


  


  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.options</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>
  
    (default <code>{}</code>)
  </td>
  <td class='break-word'><span>options for the specific kind of algorithm.
</span></td>
</tr>

  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.options.timeout</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>?</code>
  </td>
  <td class='break-word'><span>maximum time running before break in seconds.
</span></td>
</tr>


  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.options.damping</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>1.5</code>)
  </td>
  <td class='break-word'><span></span></td>
</tr>


  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.options.maxIterations</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>100</code>)
  </td>
  <td class='break-word'><span></span></td>
</tr>


  
    <tr>
  <td class='break-word'><span class='code bold'>options.optimization.options.errorTolerance</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>
  
    (default <code>1e-8</code>)
  </td>
  <td class='break-word'><span></span></td>
</tr>


  


  


              
            </tbody>
          </table>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>peaks</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a>)</code>
	    A list of initial parameters to be optimized. e.g. coming from a peak picking [{x, y, width}].

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code>:
        A object with fitting error and the list of optimized parameters { parameters: [ {x, y, width} ], error } if the kind of shape is pseudoVoigt mu parameter is optimized.

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='sumofgaussianlorentzians'>
      sumOfGaussianLorentzians
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/mljs/spectra-fitting/blob/fb8862275e380598c8343df02353610dd4d61051/src/shapes/sumOfGaussianLorentzians.js#L13-L25'>
      <span>src/shapes/sumOfGaussianLorentzians.js</span>
      </a>
    
  </div>
  

  <p>This function calculates the spectrum as a sum of linear combination of gaussian and lorentzian functions. The pseudo voigt
parameters are divided in 4 batches. 1st: centers; 2nd: heights; 3th: widths; 4th: mu's ;</p>

    <div class='pre p1 fill-light mt0'>sumOfGaussianLorentzians(p: any, t: any): any</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>p</span> <code class='quiet'>(any)</code>
	    Lorentzian parameters

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>t</span> <code class='quiet'>(any)</code>
	    Ordinate value

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>any</code>:
        
      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='sumofgaussians'>
      sumOfGaussians
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/mljs/spectra-fitting/blob/fb8862275e380598c8343df02353610dd4d61051/src/shapes/sumOfGaussians.js#L11-L22'>
      <span>src/shapes/sumOfGaussians.js</span>
      </a>
    
  </div>
  

  <p>This function calculates the spectrum as a sum of gaussian functions. The Gaussian
parameters are divided in 3 batches. 1st: centers; 2nd: height; 3th: widths;</p>

    <div class='pre p1 fill-light mt0'>sumOfGaussians(p: any, t: any): any</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>p</span> <code class='quiet'>(any)</code>
	    Gaussian parameters

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>t</span> <code class='quiet'>(any)</code>
	    Ordinate values

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>any</code>:
        
      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='sumoflorentzians'>
      sumOfLorentzians
    </h3>
    
    
      <a class='fr fill-darken0 round round pad1x quiet h5' href='https://github.com/mljs/spectra-fitting/blob/fb8862275e380598c8343df02353610dd4d61051/src/shapes/sumOfLorentzians.js#L13-L24'>
      <span>src/shapes/sumOfLorentzians.js</span>
      </a>
    
  </div>
  

  <p>This function calculates the spectrum as a sum of lorentzian functions. The Lorentzian
parameters are divided in 3 batches. 1st: centers; 2nd: heights; 3th: widths;</p>

    <div class='pre p1 fill-light mt0'>sumOfLorentzians(p: any, t: any): any</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>p</span> <code class='quiet'>(any)</code>
	    Lorentzian parameters

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>t</span> <code class='quiet'>(any)</code>
	    Ordinate values

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>any</code>:
        
      
    
  

  

  

  

  

  

  

  
</section>

          
        
      </div>
    </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/split.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
